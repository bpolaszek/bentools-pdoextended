<?php
/** 
 * ApcCache.php
 * Generated by PhpStorm - 11/2014
 * Project PDOExtended
 * @author benoit.polaszek
**/

namespace BenTools\PDOExtended\CacheHandler;


class ApcCache implements CacheHandlerInterface {

    const   DEFAULT_TTL =   0;

    public function __construct() {
        if (!function_exists('apc_exists'))
            throw new \LogicException("APC Cache isn't installed.");
    }

    /**
     * Stores data
     * @param $key
     * @param $value
     * @param int $ttl
     * @return $value
     */
    public function store($key, $value, $ttl = self::DEFAULT_TTL) {
        apc_store($key, $value, (int) $ttl);
        return $value;
    }

    /**
     * Checks if data exists in cache
     * @param $key
     * @return bool|string[]
     */
    public function exists($key) {
        return apc_exists($key);
    }

    /**
     * Retrieve data from cache
     * @param $key
     * @return mixed
     */
    public function fetch($key) {
        return apc_fetch($key);
    }

    /**
     * Deletes data from cache
     * @param $key
     * @return bool|string[]
     */
    public function delete($key) {
        return apc_delete($key);
    }

    /**
     * Returns a string from different params
     * @param $input
     * @return string
     */
    public function key($input) {
        return md5(json_encode(func_get_args()));
    }

    /**
     * Clear the cache.
     */
    public function clear() {
        return apc_clear_cache();
    }

}